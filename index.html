<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
    <title>Mừng hạnh phúc Xuân Trường - Nguyễn Hiền</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="description" content="" />
    <meta name="keyword" content="" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=1400, user-scalable=no" />
    <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon" />
    <link href="css/index.css" rel="stylesheet" />
    <script src="js/jquery-3.3.1.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/unitegallery.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/ug-theme-tiles.js" type="text/javascript" charset="utf-8"></script>
</head>
<body ontouchstart>
	<div class="loading"></div>
    <div class="background-paralax">
    	<div class="slide-item item-1 paralaxBG1" style="display: block;">
		</div>
    	<div class="slide-item item-2 paralaxBG2" style="display: none;">
		</div>
    	<div class="slide-item item-3 paralaxBG1" style="display: none;">
		</div>
    </div>
    <div class="wrapper">
    	<div class="wedding-card tab-item no-transition">
	    	<div class="cover">
	    		<img class="circle-1 circleRight" src="images/circle-1.png" />
	    		<img class="circle-2 circleLeft" src="images/circle-2.png" />
	    		<div class="flower-top">
	    			<img class="leaf" src="images/leaf-top.png" />
	    			<img class="bough-1" src="images/bough-top-1.png" />
	    			<img class="bough-2" src="images/bough-top-2.png" />
	    			<img class="bough-3" src="images/bough-top-3.png" />
	    			<img class="bough-4" src="images/bough-top-4.png" />
	    			<img class="flower-1" src="images/flower-top-1.png" />
	    			<img class="flower-2" src="images/flower-top-2.png" />
	    			<img class="flower-3" src="images/flower-top-3.png" />
	    		</div>
	    		<div class="flower-bottom">
	    			<img class="leaf" src="images/leaf-bottom.png" />
	    			<img class="bough-1" src="images/bough-bottom-1.png" />
	    			<img class="bough-2" src="images/bough-bottom-2.png" />
	    			<img class="bough-3" src="images/bough-bottom-3.png" />
	    			<img class="bough-4" src="images/bough-bottom-4.png" />
	    			<img class="flower-1" src="images/flower-bottom-1.png" />
	    			<img class="flower-2" src="images/flower-bottom-2.png" />
	    			<img class="flower-3" src="images/flower-bottom-3.png" />
	    		</div>
	    		<div class="content">
	    			<div class="name">
	    				<span class="groom">Trường</span>
	    				<img src="images/groom-bride.png" />
	    				<span class="bride">Hiền</span>
	    			</div>
	    			<div class="distich">
	    				Điểu ngữ hoa hương xuân nhất bức thiên nhiên hoạ<br/>
						Tân hoan chủ lại gia khách mãn đường cẩm thượng hoa.<br/>
						Chim hót, hoa hương, một bức thiên nhiên xuân vẽ<br/>
						Khách vui, chủ sướng đầy nhà rực rỡ gấm hoa.
	    			</div>
	    			<div class="time">
	    				18 . 11 . 2018
	    			</div>
	    		</div>
	    	</div>
	    	<div class="card-detail">
		    	<div class="block-image">
		    		<div class="block-bg">
		    			<div class="slider-image">
		    				<div class="item">
		    					<img src="images/img-slider.jpg" />
		    				</div>
		    			</div>
		    			<img class="flower-top-right" src="images/flower-top-right.png" />
		    			<img class="flower-bottom-left" src="images/flower-bottom-left.png" />
		    		</div>
		    	</div>
		    	<div class="block-info">
		    		<div class="block-bg">
		    			<div class="content">
		    				<span class="title">
		    					<img class="ribbon-left" src="images/ribbon-top-left.png" />
			    				<span>Lễ thành hôn</span>
		    					<img class="ribbon-right" src="images/ribbon-top-right.png" />
			    			</span>
			    			<span class="invitation">Trân trọng kính mời</span>
			    			<span class="invitation-people">Toàn thể anh/chị/em Sapoer</span>
			    			<span class="attend">Tới dự bữa cơm thân mật<br/>
							chung vui cùng gia đình chúng tôi</span>
							<div class="name">
			    				<span class="groom">Xuân Trường</span>
			    				<img src="images/groom-bride-2.png" />
			    				<span class="bride">Nguyễn Hiền</span>
							</div>
							<span class="time-1">Vào lúc 10 giờ 00 phút</span>
							<span class="time-2">Chủ Nhật, Ngày 18 - 11 - 2018</span>
							<span class="time-3">(Tức ngày 12 tháng 10 năm Mậu Tuất)</span>
							<span class="address">Tại nhà trai: Xóm Đình - Thôn Lam Sơn - Xã Minh Cường<br/>Huyện Thường Tín - Thành Phố Hà Nội</span>
							<span class="regards">Rất hân hạnh được đón tiếp!</span>
							<img src="images/ribbon-heart.png" />
							<div class="info-groombride">
								<div class="groom">
									<span>Chú rể</span>
									Đặng Xuân Trường
								</div>
								<div class="bride">
									<span>Cô dâu</span>
									Nguyễn Thị Hiền
								</div>
							</div>
		    			</div>
		    		</div>
		    	</div>
	    	</div>
	    	<div class="button-flip"><span>Mở</span></div>
	    </div>
	    <div class="gallery-image tab-item" style="display: none;">
	    	<div id="gallery">
				<img src="images/anhcuoi/thumb/anhcuoi (1).JPG" data-image="images/anhcuoi/anhcuoi (1).JPG" alt="">
				<img src="images/anhcuoi/thumb/anhcuoi (2).JPG" data-image="images/anhcuoi/anhcuoi (2).JPG" alt="">
				<img src="images/anhcuoi/thumb/anhcuoi (3).JPG" data-image="images/anhcuoi/anhcuoi (3).JPG" alt="">
				<img src="images/anhcuoi/thumb/anhcuoi (4).JPG" data-image="images/anhcuoi/anhcuoi (4).JPG" alt="">
				<img src="images/anhcuoi/thumb/anhcuoi (5).JPG" data-image="images/anhcuoi/anhcuoi (5).JPG" alt="">
				<img src="images/anhcuoi/thumb/anhcuoi (6).JPG" data-image="images/anhcuoi/anhcuoi (6).JPG" alt="">
				<img src="images/anhcuoi/thumb/anhcuoi (7).JPG" data-image="images/anhcuoi/anhcuoi (7).JPG" alt="">
				<img src="images/anhcuoi/thumb/anhcuoi (8).JPG" data-image="images/anhcuoi/anhcuoi (8).JPG" alt="">
				<img src="images/anhcuoi/thumb/anhcuoi (9).JPG" data-image="images/anhcuoi/anhcuoi (9).JPG" alt="">
				<img src="images/anhcuoi/thumb/anhcuoi (10).JPG" data-image="images/anhcuoi/anhcuoi (10).JPG" alt="">
				<img src="images/anhcuoi/thumb/anhcuoi (11).JPG" data-image="images/anhcuoi/anhcuoi (11).JPG" alt="">
				<img src="images/anhcuoi/thumb/anhcuoi (12).JPG" data-image="images/anhcuoi/anhcuoi (12).JPG" alt="">
				<img src="images/anhcuoi/thumb/anhcuoi (13).JPG" data-image="images/anhcuoi/anhcuoi (13).JPG" alt="">
				<img src="images/anhcuoi/thumb/anhcuoi (14).JPG" data-image="images/anhcuoi/anhcuoi (14).JPG" alt="">
				<img src="images/anhcuoi/thumb/anhcuoi (15).JPG" data-image="images/anhcuoi/anhcuoi (15).JPG" alt="">
				<img src="images/anhcuoi/thumb/anhcuoi (16).JPG" data-image="images/anhcuoi/anhcuoi (16).JPG" alt="">
			</div>
	    </div>
	    <div class="maps tab-item" style="display: none;">
			<button class="searchDirection">Tìm đường</button>
	    	<div id="map"></div>
	    	<div id="right-panel"></div>
	    </div>
    </div>
    <ul class="menu-fixed">
    	<li class="active" data-item="wedding-card">
    		<a href="javascript:;">Thiệp cưới</a>
    	</li>
    	<li data-item="gallery-image">
    		<a href="javascript:;">Album ảnh</a>
    	</li>
    	<li data-item="maps">
    		<a href="javascript:;">Bản đồ</a>
    	</li>
    </ul>
    <iframe src="mp3/silence.mp3" allow="autoplay" id="audio" style="display:none"></iframe>
    <audio id="player" autoplay loop>
	    <source src="mp3/nhac.mp3" type="audio/mp3">
	</audio>
    <script>
    	$('.button-flip').on('click', function(){
    		var $this = $(this);
    		if($this.hasClass('close-card')){
	    		$('.wedding-card').css('transition', '').fadeOut(600);
	    		setTimeout(function(){
		    		$('.card-detail').removeClass('active');
					$('.cover').css('transform','translate3d(0px, 0px, 0px) rotateY(0deg)').show();
    				$this.removeClass('close-card').find('span').text('Mở');
    				$( ".wedding-card" ).width(626);
    				$('.menu-fixed li').removeClass('active');
    				$('.menu-fixed li[data-item="gallery-image"]').addClass('active');
    				$('.gallery-image').show();
	    		}, 1000);
    		}else{
	    		$( ".wedding-card").removeClass('no-transition');
    			$this.addClass('close-card').find('span').text('Đóng');
	    		$(".cover").animate({ textIndent: 0 }, {
	    			step: function(now,fx) {
				    	$(this).css('transform','translate3d(0px, 0px, 0px) rotateY(' + 180 + 'deg)'); 
				    }
	    		}, 2000);
	    		setTimeout(function(){
    				$( ".wedding-card").width(1252);
	    			$('.card-detail').addClass('active');
	    			$('.cover').hide();
	    		}, 1000);
	    		setTimeout(function(){
	    			$( ".wedding-card").addClass('no-transition');
	    		}, 2000);
    		}
    	});
    	var slideIndex = 1;
		setInterval(function(){
			var i = 0,
				x = $('.slide-item');
			for(i = 0; i < x.length; i++){
				$(x[i]).fadeOut(1000);
			}
			slideIndex++;
			if(slideIndex > x.length){
				slideIndex = 1
			}
			$(x[slideIndex-1]).fadeIn(600);
		}, 10000);
		
		var elem = document.documentElement;
		function openFullscreen() {
		  	if (elem.requestFullscreen) {
				elem.requestFullscreen();
			} else if (elem.mozRequestFullScreen) { /* Firefox */
				elem.mozRequestFullScreen();
			} else if (elem.webkitRequestFullscreen) { /* Chrome, Safari and Opera */
				elem.webkitRequestFullscreen();
			} else if (elem.msRequestFullscreen) { /* IE/Edge */
				elem.msRequestFullscreen();
			}
		}
		$("#gallery").unitegallery({
			lightbox_type: "compact",
			tiles_justified_space_between:0,
			tiles_type: "justified",
		});
		$('.menu-fixed li').on('click', function(){
			var $this = $(this);
			if(!$this.hasClass('active')){
				$('.menu-fixed li').removeClass('active');
				$this.addClass('active');
				var tab = $this.data('item');
				$('.tab-item').fadeOut(300);
				$('.' + tab).fadeIn(300);
				if(tab == 'gallery-image'){
					$("#gallery").unitegallery();
				}else if(tab == 'maps'){
				}
			}
		});
		var checkError = "";
		var house = localStorage.getItem('house');
		if(house == 'bride'){
			var end = "Nhà Văn Hóa Thôn Yên Thái, Tiền Yên, Hoài Đức, Hà Nội";
			$('.wedding-card .cover .content .name').addClass('house-bride');
			$('.wedding-card .card-detail .block-info .content .title span').text('Lễ Vu Quy');
			$('.wedding-card .card-detail .block-info .content .name').addClass('house-bride');
			$('.wedding-card .card-detail .block-info .content .invitation-people').html('Toàn thể anh/chị/em Trần Gia');
			$('.wedding-card .card-detail .block-info .content .info-groombride').addClass('house-bride');
			$('.wedding-card .card-detail .block-info .content .address').html('Tại nhà gái: Xóm 3 - Thôn Yên Thái - Xã Tiền Yên<br/>Huyện Hoài Đức - Thành Phố Hà Nội');
			var info = "<div class='map-info'><strong>Ông bà Oanh Quang - Xóm 3</strong><br/>Thôn Yên Thái, Tiền Yên, Hoài Đức, Hà Nội</div>";
		}else{
			var end = "Cửa Hàng Lò Rèn Hải Tâm, Nam Sơn, Minh Cường, Thường Tín, Hà Nội";
			var info = "<div class='map-info'><strong>Ông bà Hải Tâm - Xóm Đình</strong><br/>Thôn Lam Sơn, Minh Cường, Thường Tín, Hà Nội</div>";
		}
		function initMap() {
			var directionsDisplay = new google.maps.DirectionsRenderer;
			var directionsService = new google.maps.DirectionsService;
			var start = '';
			var marker;

			var map = new google.maps.Map(document.getElementById('map'), {
				zoom: 16,
				center: {lat: 21.0401426, lng: 105.8114176}
			});
			directionsDisplay.setMap(map);
			directionsDisplay.setPanel(document.getElementById('right-panel'));

			var setCurrentLocation = function(){
				if (navigator.geolocation) {
					navigator.geolocation.getCurrentPosition(function(position){
						start = {lat:position.coords.latitude, lng:position.coords.longitude};
						marker = new google.maps.Marker({
							position: start,
							map: map,
							zoom: 7
						});
						calculateAndDisplayRoute(directionsService, directionsDisplay, start, end);
					}, showError);
				} else { 
					console.log("Geolocation is not supported by this browser.");
				}
			}
			function codeAddress() {
				var geocoder = new google.maps.Geocoder();
				geocoder.geocode({'address': end}, function(results, status) {
					if (status === 'OK') {
						map.setCenter(results[0].geometry.location);
						marker = new google.maps.Marker({
							position: results[0].geometry.location,
							map: map,
						});
						marker.info = new google.maps.InfoWindow({
							content: info
						});
				        google.maps.event.addListener(marker, 'click', (function(marker) {
				            return function() {
								closeInfoWindows();
								map.setCenter(marker.getPosition());
								marker.info.setContent(info);
								marker.info.open(map,marker);
							}
						})(marker));
						google.maps.event.addListenerOnce(map, 'tilesloaded', function() {
						  	marker.info.open(map, marker);
						});
					}
				})
			}
			function closeInfoWindows() {
				marker.info.close();
			}
			$('.searchDirection').on('click', function(){
				setCurrentLocation();
				navigator.permissions.query({
				     name: 'geolocation'
				 }).then(function(result) {
				     	console.log(result.state);
				     if (result.state == 'denied') {
						calculateAndDisplayRoute(directionsService, directionsDisplay, start, end);
				     }
				     result.onchange = function() {
				     	console.log(result.state);
						if (result.state == 'denied') {
							if(start == ''){
							calculateAndDisplayRoute(directionsService, directionsDisplay, start, end);
							}
						} else if (result.state == 'granted'){
							setCurrentLocation();
						}
				     }
				 });
			});
			codeAddress();
		}

		function calculateAndDisplayRoute(directionsService, directionsDisplay, start, end) {
			$('.maps').addClass('show-panel');
			if(start == ''){
				 start = "Ha Noi, Vietnam"
			}
			directionsService.route({
				origin: start,
				destination: end,
				travelMode: 'DRIVING'
			}, function(response, status) {
				if (status === 'OK') {
					directionsDisplay.setDirections(response);
				} else {
					window.alert('Directions request failed due to ' + status);
				}
			});
		}

		function getLocation(map) {
			navigator.geolocation.getCurrentPosition(function(position){
				map.setCenter({lat:position.coords.latitude, lng:position.coords.longitude});
				var marker = new google.maps.Marker({
					position: start,
					map: map
				});
			}, showError);
		}

		function showPosition(position) {
			start = position.coords;
		}

		function showError(error) {
			switch(error.code) {
				case error.PERMISSION_DENIED:
					checkError = "PERMISSION_DENIED";
					break;
				case error.POSITION_UNAVAILABLE:
					checkError = "POSITION_UNAVAILABLE";
					break;
				case error.TIMEOUT:
					checkError = "TIMEOUT";
					break;
				case error.UNKNOWN_ERROR:
					checkError = "UNKNOWN_ERROR";
					break;
			}
		}
		$(window).on('load', function(){
			setTimeout(function(){
				$('.loading').fadeOut(300);
			}, 2000);
		});
    </script>
	<script async defer src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyDhN8oNKLKynqfrcjiZpSByGvxLuXBde98&callback=initMap"></script>
</body>
</html>
